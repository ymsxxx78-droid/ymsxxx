<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ENGLISH HELL CAMP â€” ìˆ˜ëŠ¥ì˜ì–´ ì§€ì˜¥í›ˆë ¨ì†Œ</title>
  <style>
    :root {
      --bg:#0a0a0a;          /* ê±°ì˜ ê²€ì • */
      --card:#141414;        /* ì¹´ë“œ ë°°ê²½ */
      --ink:#f3f3f3;         /* ë³¸ë¬¸ í…ìŠ¤íŠ¸ */
      --ink-dim:#b5b5b5;     /* íë¦° í…ìŠ¤íŠ¸ */
      --red:#d00000;         /* í¬ì¸íŠ¸ ë ˆë“œ */
      --red-2:#ff1e1e;       /* ê°•ì¡° ë ˆë“œ */
      --ok:#00d68f;          /* ì •ë‹µìƒ‰ */
      --warn:#ffbf00;        /* ê²½ê³ ìƒ‰ */
    }

    /* RESET */
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body { margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans KR", sans-serif; background: radial-gradient(1200px 800px at 20% -10%, rgba(208,0,0,.15), transparent 60%), var(--bg); color: var(--ink); }
    a { color: inherit; text-decoration: none; }
    button { font: inherit; }

    /* LAYOUT */
    .wrap { display: grid; grid-template-rows: auto 1fr; min-height: 100dvh; }
    header { position: sticky; top:0; z-index: 10; background: linear-gradient(180deg, rgba(0,0,0,.8), rgba(0,0,0,.3)); border-bottom: 1px solid rgba(255,255,255,.06); backdrop-filter: blur(6px); }
    .topbar { display:flex; align-items:center; gap:16px; padding:14px 20px; max-width: 1100px; margin: 0 auto; }
    .brand { display:flex; align-items:center; gap:12px; letter-spacing:.6px; font-weight:800; text-transform:uppercase; }
    .brand .logo { width:34px; height:34px; border:2px solid var(--red); border-radius:10px; display:grid; place-items:center; color:var(--red); font-weight:900; }
    nav { margin-left:auto; display:flex; gap:8px; flex-wrap: wrap; }
    .tab { border:1px solid rgba(255,255,255,.08); background: #111; color:#eee; padding:10px 14px; border-radius:10px; cursor:pointer; transition:.2s; }
    .tab:hover { border-color: rgba(255,255,255,.2); transform: translateY(-1px); }
    .tab.active { background: linear-gradient(180deg, #1b1b1b, #131313); border-color: var(--red); box-shadow: inset 0 0 0 1px rgba(208,0,0,.5); }

    main { max-width: 1100px; width: 100%; margin: 18px auto 40px; padding: 0 16px; display:grid; grid-template-columns: 1.2fr .8fr; gap: 18px; }

    /* INFO PANELS */
    .card { background: linear-gradient(180deg, #171717, #0f0f0f); border:1px solid rgba(255,255,255,.07); border-radius:16px; box-shadow: 0 10px 30px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.04); }
    .card .hd { display:flex; align-items:center; justify-content:space-between; padding:14px 16px; border-bottom: 1px solid rgba(255,255,255,.06); }
    .card .hd h3 { margin:0; font-size:16px; letter-spacing:.3px; text-transform: uppercase; }
    .badge { font-size:12px; padding:4px 8px; border:1px solid rgba(255,255,255,.14); border-radius:999px; color:var(--ink-dim); }
    .card .bd { padding:16px; }

    /* HERO */
    .hero { grid-column: 1 / -1; display:grid; grid-template-columns: 1fr auto; gap: 14px; align-items:center; padding: 14px 16px; border:1px dashed rgba(208,0,0,.4); border-radius: 16px; background: linear-gradient(180deg, rgba(208,0,0,.08), rgba(208,0,0,.02)); }
    .hero h1 { margin: 6px 0 2px; font-size: clamp(24px, 4vw, 36px); letter-spacing: .6px; }
    .hero p { margin:0; color:var(--ink-dim); }
    .cta { display:flex; gap:10px; }
    .btn { appearance:none; border:none; border-radius:12px; padding:12px 16px; font-weight:800; letter-spacing:.5px; text-transform:uppercase; cursor:pointer; transition:.2s; }
    .btn-primary { background: linear-gradient(180deg, var(--red-2), var(--red)); color:#fff; box-shadow: 0 6px 18px rgba(208,0,0,.35); }
    .btn-primary:hover { filter: brightness(1.07); transform: translateY(-1px); }
    .btn-ghost { background:#151515; color:#eee; border:1px solid rgba(255,255,255,.1); }

    /* TRAINER */
    .trainer { display:grid; gap:14px; }
    .statusbar { display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
    .chip { font-size:12px; padding:6px 10px; border-radius:999px; border:1px solid rgba(255,255,255,.12); background:#121212; color:#ddd; }
    .chip strong { color:#fff; }
    .progress { height: 10px; background:#1a1a1a; border-radius:999px; overflow:hidden; border:1px solid rgba(255,255,255,.08); }
    .progress > i { display:block; height:100%; width:0%; background: linear-gradient(90deg, #ff4d4d, #d00000); transition: width .25s ease; }

    .word-card { display:grid; gap:14px; border:1px solid rgba(255,255,255,.08); border-radius:16px; padding:18px; background: radial-gradient(600px 200px at 0% 0%, rgba(255,50,50,.09), transparent 60%), #111; }
    .word { font-size: clamp(28px, 6vw, 52px); font-weight: 900; letter-spacing: .5px; color: #fff; text-shadow: 0 4px 20px rgba(208,0,0,.15); }
    .meaning { color: var(--ink-dim); font-size: 15px; }

    .answer-row { display:flex; gap:10px; }
    .input { flex:1; background:#0f0f0f; color:#fff; border:1px solid rgba(255,255,255,.12); border-radius:12px; padding:12px 14px; outline:none; box-shadow: inset 0 1px 0 rgba(255,255,255,.05); }
    .input:focus { border-color: var(--red); box-shadow: 0 0 0 4px rgba(208,0,0,.15), inset 0 1px 0 rgba(255,255,255,.05); }

    .key { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; font-weight: 700; font-size:12px; background:#0c0c0c; border:1px solid rgba(255,255,255,.15); padding:6px 8px; border-radius:8px; color:#ddd; }

    .timer { font-weight:900; letter-spacing:.5px; color:#fff; }
    .timer.bad { color: var(--red-2); }

    .examples { display:grid; gap:8px; }
    .ex { padding:10px 12px; background:#101010; border:1px solid rgba(255,255,255,.08); border-radius:10px; }
    .ex i { color: var(--ink-dim); font-style: normal; }

    .grid { display:grid; gap: 14px; }

    /* RIGHT COLUMN */
    .panel { padding: 14px; }
    .metric { display:flex; align-items:center; justify-content:space-between; padding:12px 12px; border-radius:12px; border:1px solid rgba(255,255,255,.08); background:#101010; }

    /* READING GENERATOR */
    .reading { display:grid; gap:10px; }
    .reading textarea { width:100%; min-height:120px; background:#0f0f0f; border:1px solid rgba(255,255,255,.12); border-radius:12px; padding:12px; color:#eee; }

    /* RANKING */
    .table { width:100%; border-collapse: collapse; }
    .table th, .table td { padding:12px; border-bottom:1px dashed rgba(255,255,255,.08); text-align:left; }
    .table th { color:var(--ink-dim); font-weight:600; }

    /* FOOTER */
    footer { max-width: 1100px; margin: 24px auto 60px; padding: 0 16px; color: var(--ink-dim); }

    /* RESPONSIVE */
    @media (max-width: 920px) {
      main { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="topbar">
        <div class="brand" aria-label="ì‚¬ì´íŠ¸ ë¡œê³ ">
          <div class="logo">EH</div>
          <div>
            <div style="font-size:12px; color:var(--ink-dim); line-height:1;">NO MERCY</div>
            <div style="font-size:18px; line-height:1.2;">ENGLISH HELL CAMP</div>
          </div>
        </div>
        <nav aria-label="ì£¼ìš” ë©”ë‰´">
          <button class="tab active" data-view="trainer">ë‹¨ì–´í›ˆë ¨ì†Œ</button>
          <button class="tab" data-view="examples">ë¬¸ì¥í›ˆë ¨ì†Œ</button>
          <button class="tab" data-view="reading">ë…í•´í›ˆë ¨ì†Œ</button>
          <button class="tab" data-view="report">ë‚´ ì„±ì í‘œ</button>
          <button class="tab" data-view="ranking">ì§€ì˜¥ë­í‚¹</button>
        </nav>
      </div>
    </header>

    <main>
      <!-- HERO -->
      <section class="hero card" role="region" aria-labelledby="hero-title">
        <div>
          <div class="badge">ì˜¤ëŠ˜ì˜ ë¯¸ì…˜ â€¢ ë‹¨ì–´ 30 â€¢ ì œí•œì‹œê°„ 3ì´ˆ</div>
          <h1 id="hero-title">ì˜¤ëŠ˜ë„ ë„ë§ì¹  ê±´ê°€? <span style="color:var(--red-2)">ê³µë¶€í•´.</span> ì§€ê¸ˆ.</h1>
          <p>STUDY OR DIE. ì‹¤íŒ¨ ì‹œ ì¬ì‹œí—˜. 3ì¼ ë¯¸ì ‘ì† = ì§•ê³„.</p>
        </div>
        <div class="cta">
          <button class="btn btn-primary" id="startBtn">í›ˆë ¨ ì‹œì‘</button>
          <button class="btn btn-ghost" id="retryBtn" title="í˜„ì¬ ì„¸íŠ¸ ì¬ì‹œì‘" disabled>ì¬ì‹œí—˜</button>
        </div>
      </section>

      <!-- LEFT: TRAINER / EXAMPLES / READING -->
      <section id="leftCol" class="grid">
        <!-- TRAINER -->
        <article id="view-trainer" class="card" aria-live="polite">
          <div class="hd">
            <h3>ë‹¨ì–´ ì•”ê¸° í…ŒìŠ¤íŠ¸</h3>
            <span class="badge">HELL MODE</span>
          </div>
          <div class="bd trainer">
            <div class="statusbar">
              <span class="chip">ì§„í–‰ë„ <strong id="progressText">0/0</strong></span>
              <span class="chip">ì •ë‹µ <strong id="correctText">0</strong></span>
              <span class="chip">ì˜¤ë‹µ <strong id="wrongText">0</strong></span>
              <span class="chip">ì—°ì†ì •ë‹µ <strong id="streakText">0ğŸ”¥</strong></span>
              <span class="chip timer" id="timer">00.0s</span>
            </div>
            <div class="progress" aria-hidden="true"><i id="bar"></i></div>

            <div class="word-card">
              <div class="word" id="word">â€”</div>
              <div class="meaning" id="hint">íŒíŠ¸: â€”</div>
              <div class="answer-row">
                <input id="answer" class="input" type="text" placeholder="ëœ»(í•œêµ­ì–´) ì…ë ¥ â†’ Enter" autocomplete="off" disabled />
                <button id="giveup" class="btn btn-ghost" disabled>í¬ê¸°</button>
              </div>
              <div id="feedback" class="meaning" aria-live="polite"></div>
            </div>

            <div class="examples" id="exampleList">
              <!-- ì˜ˆë¬¸ ìë™ ì¶œë ¥ -->
            </div>
          </div>
        </article>

        <!-- EXAMPLES VIEW -->
        <article id="view-examples" class="card" hidden>
          <div class="hd">
            <h3>ë¬¸ì¥ ì˜ˆì‹œ (ë‹¨ì–´ ì—°ê³„)</h3>
            <span class="badge">See â€¢ Understand â€¢ Conquer</span>
          </div>
          <div class="bd">
            <div class="answer-row" style="margin-bottom:10px;">
              <input id="exSearch" class="input" placeholder="ë‹¨ì–´ ì…ë ¥ (ì˜ˆ: abandon)" />
              <button class="btn btn-primary" id="exGo">ì˜ˆë¬¸ ë³´ê¸°</button>
            </div>
            <div id="exOut" class="examples"></div>
          </div>
        </article>

        <!-- READING VIEW -->
        <article id="view-reading" class="card" hidden>
          <div class="hd">
            <h3>ë…í•´ ë¬¸ì œ ìƒì„± (ë‹¨ì–´ ê¸°ë°˜)</h3>
            <span class="badge">ë¹ˆì¹¸/ë¬¸ì¥ì‚½ì…/ì¶”ë¡ </span>
          </div>
          <div class="bd reading">
            <div class="answer-row">
              <input id="rdWord" class="input" placeholder="ë‹¨ì–´ ì…ë ¥ (ì˜ˆ: abandon)" />
              <button class="btn btn-primary" id="rdMake">ë¬¸ì œ ìƒì„±</button>
            </div>
            <textarea id="rdPassage" readonly placeholder="ì—¬ê¸°ì— ìë™ ìƒì„±ëœ ì§€ë¬¸ì´ í‘œì‹œë©ë‹ˆë‹¤."></textarea>
            <div class="answer-row">
              <input id="rdAns" class="input" placeholder="ì •ë‹µ ì…ë ¥" />
              <button class="btn btn-ghost" id="rdCheck">ì •ë‹µí™•ì¸</button>
            </div>
            <div id="rdFeedback" class="meaning"></div>
          </div>
        </article>
      </section>

      <!-- RIGHT: METRICS / RANK / REPORT -->
      <aside class="grid">
        <section class="card panel">
          <div class="hd">
            <h3>ë‚´ í›ˆë ¨ ìƒíƒœ</h3>
            <span class="badge">STUDY OR DIE</span>
          </div>
          <div class="bd grid">
            <div class="metric"><span>ì˜¤ëŠ˜ í•™ìŠµì‹œê°„</span><strong id="m-time">00:00</strong></div>
            <div class="metric"><span>ì„±ê³µë¥ </span><strong id="m-acc">0%</strong></div>
            <div class="metric"><span>íŒ¨ë°° ì¹´ìš´íŠ¸</span><strong id="m-fail">0</strong></div>
            <div class="metric"><span>ì§€ì˜¥íƒˆì¶œê¶Œ</span><strong id="m-pass">0</strong></div>
          </div>
        </section>

        <section id="view-report" class="card panel" hidden>
          <div class="hd">
            <h3>í›ˆë ¨ ë¦¬í¬íŠ¸</h3>
            <span class="badge">Daily / Weekly</span>
          </div>
          <div class="bd">
            <ul id="reportList" style="margin:0; padding-left:18px; line-height:1.7">
              <!-- ìë™ ë¦¬í¬íŠ¸ -->
            </ul>
          </div>
        </section>

        <section id="view-ranking" class="card panel" hidden>
          <div class="hd">
            <h3>ì§€ì˜¥ ë­í‚¹ (ìƒ˜í”Œ)</h3>
            <span class="badge">TOP 10 Survivors</span>
          </div>
          <div class="bd">
            <table class="table" aria-label="ë­í‚¹ í…Œì´ë¸”">
              <thead><tr><th>#</th><th>ë‹‰ë„¤ì„</th><th>ì ìˆ˜</th><th>ì—°ì†ì •ë‹µ</th></tr></thead>
              <tbody id="rankBody"></tbody>
            </table>
          </div>
        </section>
      </aside>
    </main>

    <footer>
      <div style="opacity:.9">â“’ ENGLISH HELL CAMP â€” â€˜ê°•í•˜ê²Œ, ê°•ì œì ìœ¼ë¡œ, ì—„í•˜ê²Œâ€™. ì§€ê° = ì¬ì‹œí—˜.</div>
    </footer>
  </div>

  <script>
    // -------------------------------
    // ìƒ˜í”Œ ë°ì´í„° (ì˜¤ëŠ˜ì˜ ë‹¨ì–´)
    // -------------------------------
    const WORDS = [
      { w: 'abandon', k: 'ë²„ë¦¬ë‹¤, í¬ê¸°í•˜ë‹¤', ex: [
        'The captain decided to <b>abandon</b> the sinking ship.',
        'He had to <b>abandon</b> his plan due to lack of funds.',
        'They refused to <b>abandon</b> hope despite difficulties.'
      ]},
      { w: 'derive', k: 'ì–»ë‹¤, ìœ ë˜í•˜ë‹¤', ex: [
        'Many English words <b>derive</b> from Latin.',
        'We can <b>derive</b> a formula from the data.',
        'Happiness can <b>derive</b> from small things.'
      ]},
      { w: 'condemn', k: 'ë¹„ë‚œí•˜ë‹¤, ìœ ì£„ì„ ê³ í•˜ë‹¤', ex: [
        'The leaders <b>condemned</b> the violent attack.',
        'The building was <b>condemned</b> as unsafe.',
        'He was <b>condemned</b> to life imprisonment.'
      ]},
      { w: 'notion', k: 'ê°œë…, ìƒê°', ex: [
        'The <b>notion</b> of freedom is complex.',
        'She rejected the <b>notion</b> that luck decides everything.',
        'He had no <b>notion</b> of what to do.'
      ]},
      { w: 'pursue', k: 'ì¶”êµ¬í•˜ë‹¤, ë’¤ì«“ë‹¤', ex: [
        'She decided to <b>pursue</b> a career in medicine.',
        'The police <b>pursued</b> the suspect through the streets.',
        'We must <b>pursue</b> our goals with discipline.'
      ]},
      { w: 'reinforce', k: 'ê°•í™”í•˜ë‹¤', ex: [
        'Teachers try to <b>reinforce</b> positive behavior.',
        'Steel bars <b>reinforce</b> the concrete walls.',
        'The coach <b>reinforced</b> the team's defense.'
      ]},
      { w: 'confront', k: 'ì§ë©´í•˜ë‹¤, ë§ì„œë‹¤', ex: [
        'You must <b>confront</b> your fear.',
        'We were <b>confronted</b> with a difficult choice.',
        'He <b>confronted</b> the bully without hesitation.'
      ]},
      { w: 'assess', k: 'í‰ê°€í•˜ë‹¤', ex: [
        'Let's <b>assess</b> the risks before we act.',
        'The test <b>assesses</b> students' abilities.',
        'We need to <b>assess</b> the damage first.'
      ]},
      { w: 'crucial', k: 'ì¤‘ìš”í•œ, ê²°ì •ì ì¸', ex: [
        'Sleep is <b>crucial</b> for good health.',
        'This is a <b>crucial</b> step in the process.',
        'Your support is <b>crucial</b> to our success.'
      ]},
      { w: 'allocate', k: 'í• ë‹¹í•˜ë‹¤, ë°°ë¶„í•˜ë‹¤', ex: [
        'We must <b>allocate</b> time for revision.',
        'The funds were <b>allocated</b> to education.',
        'Please <b>allocate</b> tasks fairly.'
      ]},
      { w: 'maintain', k: 'ìœ ì§€í•˜ë‹¤, ì£¼ì¥í•˜ë‹¤', ex: [
        'He <b>maintains</b> a strict schedule.',
        'They <b>maintain</b> that they are innocent.',
        'It's hard to <b>maintain</b> concentration.'
      ]},
      { w: 'inevitable', k: 'ë¶ˆê°€í”¼í•œ', ex: [
        'Failure is <b>inevitable</b> if you never try.',
        'Change is <b>inevitable</b> in life.',
        'It was an <b>inevitable</b> result.'
      ]},
      { w: 'superficial', k: 'í”¼ìƒì ì¸', ex: [
        'His analysis was <b>superficial</b>.',
        'Don't make <b>superficial</b> judgments.',
        'The wound is <b>superficial</b> and not serious.'
      ]},
      { w: 'transform', k: 'ë³€í™”ì‹œí‚¤ë‹¤', ex: [
        'Hard work can <b>transform</b> your life.',
        'The city was <b>transformed</b> by the new subway.',
        'We aim to <b>transform</b> education.'
      ]},
      { w: 'frustrate', k: 'ì¢Œì ˆì‹œí‚¤ë‹¤', ex: [
        'The delays <b>frustrated</b> the team.',
        'Don't be <b>frustrated</b> by mistakes; learn.',
        'Security checks <b>frustrated</b> the plan.'
      ]}
    ];

    // ìƒíƒœ
    let order = [];         // ì˜¤ëŠ˜ì˜ ë¬¸ì œ ìˆœì„œ
    let idx = 0;            // í˜„ì¬ ì¸ë±ìŠ¤
    let correct = 0, wrong = 0, streak = 0;
    let ticking = false, timerId = null, remain = 0; // ì´ˆ ë‹¨ìœ„
    let studiedSec = 0;     // ì´ í•™ìŠµ ì‹œê°„
    let passTicket = 0;     // ì§€ì˜¥íƒˆì¶œê¶Œ
    let lastAnswer = '';

    // ìš”ì†Œ ì°¸ì¡°
    const startBtn = document.getElementById('startBtn');
    const retryBtn = document.getElementById('retryBtn');
    const giveupBtn = document.getElementById('giveup');
    const wordEl = document.getElementById('word');
    const hintEl = document.getElementById('hint');
    const answerEl = document.getElementById('answer');
    const feedbackEl = document.getElementById('feedback');
    const exampleList = document.getElementById('exampleList');
    const progressText = document.getElementById('progressText');
    const correctText = document.getElementById('correctText');
    const wrongText   = document.getElementById('wrongText');
    const streakText  = document.getElementById('streakText');
    const timerEl  = document.getElementById('timer');
    const bar = document.getElementById('bar');

    const mTime = document.getElementById('m-time');
    const mAcc  = document.getElementById('m-acc');
    const mFail = document.getElementById('m-fail');
    const mPass = document.getElementById('m-pass');

    const tabs = [...document.querySelectorAll('.tab')];
    const views = {
      trainer: document.getElementById('view-trainer'),
      examples: document.getElementById('view-examples'),
      reading: document.getElementById('view-reading'),
      report: document.getElementById('view-report'),
      ranking: document.getElementById('view-ranking')
    };

    // ì ‘ê·¼ì„±: ê²½ê³ ìŒ ìƒì„±
    const buzz = () => {
      try {
        const ctx = new (window.AudioContext || window.webkitAudioContext)();
        const o = ctx.createOscillator();
        const g = ctx.createGain();
        o.type = 'square';
        o.frequency.value = 120;
        g.gain.setValueAtTime(.2, ctx.currentTime);
        g.gain.exponentialRampToValueAtTime(0.0001, ctx.currentTime + 0.25);
        o.connect(g).connect(ctx.destination);
        o.start();
        o.stop(ctx.currentTime + 0.25);
      } catch(e) {}
    };

    // íƒ€ì´ë¨¸ í‹±
    function tick() {
      if (!ticking) return;
      remain -= 0.1;
      studiedSec += 0.1;
      updateStudyClock();
      if (remain <= 0) {
        remain = 0;
        timerEl.classList.add('bad');
        wrong++;
        streak = 0;
        updateHud();
        buzz();
        feedback('ì‹œê°„ì´ˆê³¼ â€” ì¬ì‹œí—˜ ê°ì˜¤í•´ë¼.', false);
        nextQuestion();
      }
      drawTimer();
    }

    function updateStudyClock() {
      const s = Math.floor(studiedSec);
      const mm = String(Math.floor(s/60)).padStart(2,'0');
      const ss = String(s%60).padStart(2,'0');
      mTime.textContent = `${mm}:${ss}`;
    }

    function drawTimer() {
      timerEl.textContent = `${remain.toFixed(1)}s`;
      const total = 3.0; // 3ì´ˆ
      const pct = 100 * (remain/total);
      bar.style.width = `${Math.max(0, Math.min(100, pct))}%`;
    }

    function shuffle(arr) {
      return [...arr].sort(() => Math.random() - .5);
    }

    function startSet() {
      order = shuffle(WORDS.map((_, i) => i));
      idx = 0; correct = 0; wrong = 0; streak = 0; studiedSec = 0; lastAnswer='';
      feedback('í›ˆë ¨ ì‹œì‘. íƒ€ì´ë¨¸ëŠ” 3ì´ˆ. ë§ì„¤ì´ë©´ íŒ¨ë°°.', true);
      updateHud();
      answerEl.disabled = false; giveupBtn.disabled = false; retryBtn.disabled = false;
      answerEl.value=''; answerEl.focus();
      showQuestion();
      if (timerId) clearInterval(timerId);
      ticking = true; timerId = setInterval(tick, 100);
    }

    function updateHud() {
      progressText.textContent = `${Math.min(idx, order.length)}/${order.length}`;
      correctText.textContent = correct;
      wrongText.textContent = wrong;
      streakText.textContent = `${streak}ğŸ”¥`;
      const total = Math.max(1, correct + wrong);
      const acc = Math.round((correct/total)*100);
      mAcc.textContent = `${acc}%`;
      mFail.textContent = wrong;
      mPass.textContent = passTicket;
    }

    function showQuestion() {
      if (idx >= order.length) {
        // ì„¸íŠ¸ ì¢…ë£Œ
        ticking = false; clearInterval(timerId); timerId = null;
        answerEl.disabled = true; giveupBtn.disabled = true;
        const acc = Math.round((correct/Math.max(1,(correct+wrong)))*100);
        if (acc >= 90) { passTicket++; feedback(`ì¢…ë£Œ. ì„±ê³µë¥  ${acc}%. ì§€ì˜¥íƒˆì¶œê¶Œ +1 ì§€ê¸‰.`, true); }
        else feedback(`ì¢…ë£Œ. ì„±ê³µë¥  ${acc}%. ì¬ì‹œí—˜ ê¶Œì¥.`, acc>=70);
        updateHud();
        return;
      }
      const q = WORDS[order[idx]];
      wordEl.textContent = q.w;
      hintEl.textContent = `íŒíŠ¸: ${q.k}`;
      exampleList.innerHTML = q.ex.map(s=>`<div class="ex">${s} <i>â€” ì´ ë‹¨ì–´ë¥¼ ì´ë ‡ê²Œ ì•ˆ ì™¸ìš°ë©´ ë…í•´ ëª» í•¨.</i></div>`).join('');
      remain = 3.0; timerEl.classList.remove('bad'); drawTimer();
    }

    function feedback(msg, good) {
      feedbackEl.style.color = good ? 'var(--ok)' : 'var(--red-2)';
      feedbackEl.textContent = msg;
    }

    function answerSubmit() {
      if (idx >= order.length) return;
      const q = WORDS[order[idx]];
      const val = answerEl.value.trim();
      lastAnswer = val;
      const ok = val && q.k.includes(val.replace(/\s+/g,'').slice(0,2)); // ëŠìŠ¨í•œ íŒì •(ì´ˆì„±ëŠë‚Œ)
      if (ok) {
        correct++; streak++; feedback('ì •ë‹µ. ë‹¤ìŒ.', true);
      } else {
        wrong++; streak=0; feedback(`ì˜¤ë‹µ. ì •ë‹µ íŒíŠ¸: ${q.k}`, false); buzz();
      }
      idx++; updateHud(); answerEl.value='';
      nextQuestion();
    }

    function nextQuestion() {
      // ì•½ê°„ì˜ í…€
      setTimeout(showQuestion, 350);
    }

    // íƒ­ ì „í™˜
    tabs.forEach(t=>t.addEventListener('click', ()=>{
      tabs.forEach(x=>x.classList.remove('active'));
      t.classList.add('active');
      const v = t.dataset.view;
      Object.entries(views).forEach(([k,el])=>{
        if (k===v) el.hidden = false; else el.hidden = true;
      });
    }));

    // ë²„íŠ¼ ë°”ì¸ë“œ
    startBtn.addEventListener('click', startSet);
    retryBtn.addEventListener('click', startSet);
    giveupBtn.addEventListener('click', ()=>{
      wrong++; streak=0; updateHud(); buzz();
      feedback('í¬ê¸°? ê·¸ëŸ° ë‹¨ì–´ëŠ” ì—†ë‹¤. ê°ì .', false);
      idx++; nextQuestion();
    });
    answerEl.addEventListener('keydown', (e)=>{ if(e.key==='Enter') answerSubmit(); });

    // ë¬¸ì¥ ì˜ˆì‹œ ì°¾ê¸°
    document.getElementById('exGo').addEventListener('click', ()=>{
      const q = document.getElementById('exSearch').value.trim().toLowerCase();
      const hit = WORDS.find(x=>x.w===q);
      const out = document.getElementById('exOut');
      if (!hit) { out.innerHTML = `<div class='ex' style='color:var(--red-2)'>ë‹¨ì–´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ.</div>`; return; }
      out.innerHTML = hit.ex.map((s,i)=>`<div class='ex'><b>${i+1}.</b> ${s}</div>`).join('');
    });

    // ë…í•´ ë¬¸ì œ ìƒì„±ê¸° (ê°„ë‹¨ ë£° ê¸°ë°˜)
    document.getElementById('rdMake').addEventListener('click', ()=>{
      const w = document.getElementById('rdWord').value.trim().toLowerCase();
      if (!w) return;
      const hit = WORDS.find(x=>x.w===w);
      const meaning = hit ? hit.k : 'â€”';
      const tmpl = [
        `Despite multiple warnings, the team chose to <b>${w}</b> the safety protocol, which led to serious consequences.`,
        `For long-term success, it is <b>${w==='crucial'?'crucial':'crucial'}</b> to build consistent study habits from the first year of high school.`,
        `Some students <b>${w}</b> challenges, while others confront them and grow stronger.`
      ];
      // ë¹ˆì¹¸ ë§Œë“¤ê¸°
      const passage = tmpl.join(' ') .replace(new RegExp(`\\b${w}\\b`, 'gi'), '_____');
      document.getElementById('rdPassage').value = passage + `\n\n[ë¬¸í•­] ìœ„ ê¸€ì˜ ë¹ˆì¹¸ì— ë“¤ì–´ê°ˆ ê°€ì¥ ì ì ˆí•œ ë‹¨ì–´ëŠ”?\n(A) ${w}  (B) notion  (C) maintain  (D) allocate`;
      document.getElementById('rdFeedback').textContent = `íŒíŠ¸: ${w} = ${meaning}`;
    });

    document.getElementById('rdCheck').addEventListener('click', ()=>{
      const w = document.getElementById('rdWord').value.trim().toLowerCase();
      const ans = document.getElementById('rdAns').value.trim().toLowerCase();
      const fb = document.getElementById('rdFeedback');
      if (!w) return;
      if (ans === w) { fb.style.color='var(--ok)'; fb.textContent = 'ì •ë‹µ. í›ˆë ¨ì„ ê³„ì†í•´ë¼.'; }
      else { fb.style.color='var(--red-2)'; fb.textContent = 'ì˜¤ë‹µ. ì¬ë„ì „.'; buzz(); }
    });

    // ë”ë¯¸ ë­í‚¹
    const rankData = [
      ['#1','HARDMODE99', 980, 45],
      ['#2','HELLRUNNER', 965, 40],
      ['#3','NOEXCUSE', 950, 38],
      ['#4','PANICSTUDY', 928, 34],
      ['#5','GRINDKING', 910, 31],
      ['#6','REDALERT', 900, 29],
      ['#7','FOCUS707', 880, 27],
      ['#8','RUTHLESS', 865, 26],
      ['#9','LASTBOSS', 850, 25],
      ['#10','DISCIPLINE', 842, 22]
    ];
    document.getElementById('rankBody').innerHTML = rankData.map(r=>`<tr><td>${r[0]}</td><td>${r[1]}</td><td>${r[2]}</td><td>${r[3]}</td></tr>`).join('');

    // ê¸°ë³¸ ë·°: íŠ¸ë ˆì´ë„ˆ í¬ì»¤ìŠ¤
    answerEl.disabled = true; // ì‹œì‘ ì „ì—ëŠ” ë¹„í™œì„±í™”

    // íƒ­ ë‹¨ì¶•í‚¤
    window.addEventListener('keydown', (e)=>{
      if (e.key==='1') tabs[0].click();
      if (e.key==='2') tabs[1].click();
      if (e.key==='3') tabs[2].click();
      if (e.key==='4') tabs[3].click();
      if (e.key==='5') tabs[4].click();
    });
  </script>
</body>
</html>
