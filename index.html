<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ENGLISH HELL CAMP — 수능영어 지옥훈련소</title>
  <!-- Excel(XLSX) 파서 -->
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
  <style>
    :root {
      --bg:#0a0a0a; --card:#141414; --ink:#f3f3f3; --ink-dim:#b5b5b5; --red:#d00000; --red-2:#ff1e1e; --ok:#00d68f;
    }
    *{box-sizing:border-box} html,body{height:100%} body{margin:0;background:radial-gradient(1200px 800px at 20% -10%, rgba(208,0,0,.15), transparent 60%),var(--bg);color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans KR",sans-serif}
    .wrap{display:grid;grid-template-rows:auto 1fr;min-height:100dvh}
    header{position:sticky;top:0;z-index:10;background:linear-gradient(180deg,rgba(0,0,0,.8),rgba(0,0,0,.3));border-bottom:1px solid rgba(255,255,255,.06);backdrop-filter:blur(6px)}
    .topbar{display:flex;align-items:center;gap:16px;padding:14px 20px;max-width:1100px;margin:0 auto}
    .brand{display:flex;align-items:center;gap:12px;letter-spacing:.6px;font-weight:800;text-transform:uppercase}
    .brand .logo{width:34px;height:34px;border:2px solid var(--red);border-radius:10px;display:grid;place-items:center;color:var(--red);font-weight:900}
    nav{margin-left:auto;display:flex;gap:8px;flex-wrap:wrap}
    .tab{border:1px solid rgba(255,255,255,.08);background:#111;color:#eee;padding:10px 14px;border-radius:10px;cursor:pointer;transition:.2s}
    .tab:hover{border-color:rgba(255,255,255,.2);transform:translateY(-1px)} .tab.active{background:linear-gradient(180deg,#1b1b1b,#131313);border-color:var(--red);box-shadow:inset 0 0 0 1px rgba(208,0,0,.5)}
    main{max-width:1100px;width:100%;margin:18px auto 40px;padding:0 16px;display:grid;grid-template-columns:1.2fr .8fr;gap:18px}
    .card{background:linear-gradient(180deg,#171717,#0f0f0f);border:1px solid rgba(255,255,255,.07);border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,.35),inset 0 1px 0 rgba(255,255,255,.04)}
    .card .hd{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid rgba(255,255,255,.06)}
    .card .hd h3{margin:0;font-size:16px;letter-spacing:.3px;text-transform:uppercase}
    .badge{font-size:12px;padding:4px 8px;border:1px solid rgba(255,255,255,.14);border-radius:999px;color:var(--ink-dim)}
    .card .bd{padding:16px}
    .hero{grid-column:1/-1;display:grid;grid-template-columns:1fr auto;gap:14px;align-items:center;padding:14px 16px;border:1px dashed rgba(208,0,0,.4);border-radius:16px;background:linear-gradient(180deg,rgba(208,0,0,.08),rgba(208,0,0,.02))}
    .hero h1{margin:6px 0 2px;font-size:clamp(24px,4vw,36px);letter-spacing:.6px}
    .hero p{margin:0;color:var(--ink-dim)} .cta{display:flex;gap:10px}
    .btn{appearance:none;border:none;border-radius:12px;padding:12px 16px;font-weight:800;letter-spacing:.5px;text-transform:uppercase;cursor:pointer;transition:.2s}
    .btn-primary{background:linear-gradient(180deg,var(--red-2),var(--red));color:#fff;box-shadow:0 6px 18px rgba(208,0,0,.35)}
    .btn-primary:hover{filter:brightness(1.07);transform:translateY(-1px)} .btn-ghost{background:#151515;color:#eee;border:1px solid rgba(255,255,255,.1)}
    .grid{display:grid;gap:14px}
    .statusbar{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    .chip{font-size:12px;padding:6px 10px;border-radius:999px;border:1px solid rgba(255,255,255,.12);background:#121212;color:#ddd}
    .progress{height:10px;background:#1a1a1a;border-radius:999px;overflow:hidden;border:1px solid rgba(255,255,255,.08)} .progress>i{display:block;height:100%;width:0%;background:linear-gradient(90deg,#ff4d4d,#d00000);transition:width .25s ease}
    .word-card{display:grid;gap:14px;border:1px solid rgba(255,255,255,.08);border-radius:16px;padding:18px;background:radial-gradient(600px 200px at 0% 0%, rgba(255,50,50,.09), transparent 60%), #111}
    .word{font-size:clamp(28px,6vw,52px);font-weight:900;letter-spacing:.5px;color:#fff;text-shadow:0 4px 20px rgba(208,0,0,.15)} .meaning{color:var(--ink-dim);font-size:15px}
    .answer-row{display:flex;gap:10px}
    .input{flex:1;background:#0f0f0f;color:#fff;border:1px solid rgba(255,255,255,.12);border-radius:12px;padding:12px 14px;outline:none;box-shadow:inset 0 1px 0 rgba(255,255,255,.05)}
    .input:focus{border-color:var(--red);box-shadow:0 0 0 4px rgba(208,0,0,.15),inset 0 1px 0 rgba(255,255,255,.05)}
    .timer{font-weight:900;letter-spacing:.5px;color:#fff} .timer.bad{color:var(--red-2)}
    .ex{padding:10px 12px;background:#101010;border:1px solid rgba(255,255,255,.08);border-radius:10px}
    .panel{padding:14px}
    .metric{display:flex;align-items:center;justify-content:space-between;padding:12px 12px;border-radius:12px;border:1px solid rgba(255,255,255,.08);background:#101010}
    .table{width:100%;border-collapse:collapse}
    .table th,.table td{padding:12px;border-bottom:1px dashed rgba(255,255,255,.08);text-align:left}
    footer{max-width:1100px;margin:24px auto 60px;padding:0 16px;color:var(--ink-dim)}
    @media (max-width:920px){main{grid-template-columns:1fr}}
    .toast{position:fixed;right:16px;bottom:16px;background:#151515;border:1px solid rgba(255,255,255,.12);padding:12px 14px;border-radius:12px;box-shadow:0 4px 20px rgba(0,0,0,.4);opacity:0;transform:translateY(6px);transition:.25s}
    .toast.show{opacity:1;transform:none}
    .uploader{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    input[type=file]{background:#0f0f0f;border:1px solid rgba(255,255,255,.12);border-radius:10px;padding:10px}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="topbar">
        <div class="brand" aria-label="사이트 로고">
          <div class="logo">EH</div>
          <div>
            <div style="font-size:12px;color:var(--ink-dim);line-height:1;">NO MERCY</div>
            <div style="font-size:18px;line-height:1.2;">ENGLISH HELL CAMP</div>
          </div>
        </div>
        <nav aria-label="주요 메뉴">
          <button class="tab active" data-view="trainer">단어훈련소</button>
          <button class="tab" data-view="report">내 성적표</button>
        </nav>
      </div>
    </header>

    <main>
      <!-- HERO -->
      <section class="hero card" role="region" aria-labelledby="hero-title">
        <div>
          <div class="badge" id="badgeInfo">오늘의 미션 • 단어 <b id="badgeCount">0</b> • 제한시간 10초</div>
          <h1 id="hero-title">오늘도 도망칠 건가? <span style="color:var(--red-2)">공부해.</span> 지금.</h1>
          <p>STUDY OR DIE. 실패 시 재시험. 3일 미접속 = 징계.</p>
        </div>
        <div class="cta">
          <button class="btn btn-primary" id="startBtn">훈련 시작</button>
          <button class="btn btn-ghost" id="retryBtn" title="현재 세트 재시작" disabled>재시험</button>
        </div>
      </section>

      <!-- LEFT COLUMN -->
      <section id="leftCol" class="grid">
        <!-- TRAINER -->
        <article id="view-trainer" class="card" aria-live="polite">
          <div class="hd">
            <h3>단어 암기 테스트</h3>
            <span class="badge">HELL MODE</span>
          </div>
          <div class="bd grid">
            <div class="statusbar">
              <span class="chip">진행도 <strong id="progressText">0/0</strong></span>
              <span class="chip">정답 <strong id="correctText">0</strong></span>
              <span class="chip">오답 <strong id="wrongText">0</strong></span>
              <span class="chip">연속정답 <strong id="streakText">0🔥</strong></span>
              <span class="chip timer" id="timer">00.0s</span>
            </div>
            <div class="progress" aria-hidden="true"><i id="bar"></i></div>

            <div class="answer-row" id="modeRow">
              <button class="btn btn-primary" id="modeTrain" aria-pressed="true">훈련 모드</button>
              <button class="btn btn-ghost" id="modeTest" aria-pressed="false">테스트 모드</button>
              <span class="badge" id="modeBadge" style="display:none">힌트 없음(테스트)</span>
            </div>

            <div class="word-card">
              <div class="word" id="word">—</div>
              <div class="meaning" id="hint">힌트: —</div>
              <div class="answer-row">
                <input id="answer" class="input" type="text" placeholder="뜻(한국어) 입력 → Enter" autocomplete="off" disabled />
                <button id="giveup" class="btn btn-ghost" disabled>포기</button>
              </div>
              <div id="feedback" class="meaning" aria-live="polite"></div>
            </div>

            <div class="grid">
              <div class="uploader">
                <input type="file" id="excelFile" accept=".xlsx,.xls" />
                <button class="btn btn-ghost" id="loadBtn">단어세트 업로드</button>
                <span class="badge" id="uploadInfo">샘플 세트 사용 중</span>
              </div>
              <details style="opacity:.9">
                <summary>엑셀 형식 안내</summary>
                <div class="meaning">첫 열 = 영단어, 두 번째 열 = 한글 뜻<br/>예) <code>apple | 사과</code></div>
              </details>
            </div>

            <div class="examples" id="exampleList"></div>
          </div>
        </article>

        <!-- EXAMPLES VIEW -->
        <article id="view-examples" class="card" hidden>
          <div class="hd">
            <h3>문장 예시 (단어 연계)</h3>
            <span class="badge">See • Understand • Conquer</span>
          </div>
          <div class="bd">
            <div class="answer-row" style="margin-bottom:10px;">
              <input id="exSearch" class="input" placeholder="단어 입력 (예: abandon)" />
              <button class="btn btn-primary" id="exGo">예문 보기</button>
            </div>
            <div id="exOut" class="grid"></div>
          </div>
        </article>

        <!-- READING VIEW -->
        <article id="view-reading" class="card" hidden>
          <div class="hd">
            <h3>독해 문제 생성 (단어 기반)</h3>
            <span class="badge">빈칸/문장삽입/추론</span>
          </div>
          <div class="bd grid">
            <div class="answer-row">
              <input id="rdWord" class="input" placeholder="단어 입력 (예: abandon)" />
              <button class="btn btn-primary" id="rdMake">문제 생성</button>
            </div>
            <textarea id="rdPassage" readonly style="width:100%;min-height:120px;background:#0f0f0f;border:1px solid rgba(255,255,255,.12);border-radius:12px;padding:12px;color:#eee" placeholder="여기에 자동 생성된 지문이 표시됩니다."></textarea>
            <div class="answer-row">
              <input id="rdAns" class="input" placeholder="정답 입력" />
              <button class="btn btn-ghost" id="rdCheck">정답확인</button>
            </div>
            <div id="rdFeedback" class="meaning"></div>
          </div>
        </article>
      </section>

      <!-- RIGHT COLUMN -->
      <aside class="grid">
        <section class="card panel">
          <div class="hd">
            <h3>내 훈련 상태</h3>
            <span class="badge">STUDY OR DIE</span>
          </div>
          <div class="bd grid">
            <div class="metric"><span>오늘 학습시간</span><strong id="m-time">00:00</strong></div>
            <div class="metric"><span>성공률</span><strong id="m-acc">0%</strong></div>
            <div class="metric"><span>패배 카운트</span><strong id="m-fail">0</strong></div>
            <div class="metric"><span>지옥탈출권</span><strong id="m-pass">0</strong></div>
          </div>
        </section>

        <section id="view-report" class="card panel" hidden>
          <div class="hd">
            <h3>훈련 리포트</h3>
            <span class="badge">Daily / Weekly</span>
          </div>
          <div class="bd">
            <ul id="reportList" style="margin:0; padding-left:18px; line-height:1.7"></ul>
          </div>
        </section>

        <section id="view-ranking" class="card panel" hidden>
          <div class="hd">
            <h3>지옥 랭킹 (샘플)</h3>
            <span class="badge">TOP 10 Survivors</span>
          </div>
          <div class="bd">
            <table class="table" aria-label="랭킹 테이블">
              <thead><tr><th>#</th><th>닉네임</th><th>점수</th><th>연속정답</th></tr></thead>
              <tbody id="rankBody"></tbody>
            </table>
          </div>
        </section>
      </aside>
    </main>

    <footer>
      <div style="opacity:.9">ⓒ ENGLISH HELL CAMP — ‘강하게, 강제적으로, 엄하게’. 지각 = 재시험.</div>
    </footer>
  </div>

  <div id="toast" class="toast" role="status" aria-live="polite"></div>

  <script>
    // -------------------------------
    // 샘플 데이터 (기본 세트)
    // -------------------------------
    let WORDS = [
      { w: 'abandon', k: '버리다, 포기하다', ex: [
        'The captain decided to <b>abandon</b> the sinking ship.',
        'He had to <b>abandon</b> his plan due to lack of funds.',
        'They refused to <b>abandon</b> hope despite difficulties.'
      ]},
      { w: 'derive', k: '얻다, 유래하다', ex: [
        'Many English words <b>derive</b> from Latin.',
        'We can <b>derive</b> a formula from the data.',
        'Happiness can <b>derive</b> from small things.'
      ]},
      { w: 'condemn', k: '비난하다, 유죄선고하다', ex: [
        'The leaders <b>condemned</b> the violent attack.',
        'The building was <b>condemned</b> as unsafe.',
        'He was <b>condemned</b> to life imprisonment.'
      ]},
      { w: 'notion', k: '개념, 생각', ex: [
        'The <b>notion</b> of freedom is complex.',
        'She rejected the <b>notion</b> that luck decides everything.',
        'He had no <b>notion</b> of what to do.'
      ]},
      { w: 'pursue', k: '추구하다, 뒤쫓다', ex: [
        'She decided to <b>pursue</b> a career in medicine.',
        'The police <b>pursued</b> the suspect through the streets.',
        'We must <b>pursue</b> our goals with discipline.'
      ]}
    ];

    // 상태
    let order = []; let idx = 0; let correct = 0, wrong = 0, streak = 0;
    let ticking = false, timerId = null, remain = 0; let studiedSec = 0; let passTicket = 0; let testMode = false;

    // 요소 참조
    const startBtn = document.getElementById('startBtn');
    const retryBtn = document.getElementById('retryBtn');
    const giveupBtn = document.getElementById('giveup');
    const wordEl = document.getElementById('word');
    const hintEl = document.getElementById('hint');
    const answerEl = document.getElementById('answer');
    const feedbackEl = document.getElementById('feedback');
    const exampleList = document.getElementById('exampleList');
    const progressText = document.getElementById('progressText');
    const correctText = document.getElementById('correctText');
    const wrongText   = document.getElementById('wrongText');
    const streakText  = document.getElementById('streakText');
    const timerEl  = document.getElementById('timer');
    const bar = document.getElementById('bar');
    const mTime = document.getElementById('m-time');
    const mAcc  = document.getElementById('m-acc');
    const mFail = document.getElementById('m-fail');
    const mPass = document.getElementById('m-pass');
    const tabs = [...document.querySelectorAll('.tab')];
    const views = { trainer:document.getElementById('view-trainer'), report:document.getElementById('view-report') };
    const badgeCount = document.getElementById('badgeCount');
    const uploadInfo = document.getElementById('uploadInfo');
    const toast = document.getElementById('toast');
    const modeTrain = document.getElementById('modeTrain');
    const modeTest = document.getElementById('modeTest');
    const modeBadge = document.getElementById('modeBadge');

    const excelInput = document.getElementById('excelFile');
    const loadBtn = document.getElementById('loadBtn');

    function toastShow(msg){ toast.textContent = msg; toast.classList.add('show'); setTimeout(()=>toast.classList.remove('show'), 2200); }

    function buzz(){ try{ const ctx = new (window.AudioContext||window.webkitAudioContext)(); const o=ctx.createOscillator(); const g=ctx.createGain(); o.type='square'; o.frequency.value=120; g.gain.setValueAtTime(.2, ctx.currentTime); g.gain.exponentialRampToValueAtTime(0.0001, ctx.currentTime+0.25); o.connect(g).connect(ctx.destination); o.start(); o.stop(ctx.currentTime+0.25);}catch(e){} }

    function tick(){ if(!ticking) return; remain -= .1; studiedSec += .1; updateStudyClock(); if(remain<=0){ remain=0; timerEl.classList.add('bad'); wrong++; streak=0; updateHud(); buzz(); feedback('시간초과 — 재시험 각오해라.', false); nextQuestion(); } drawTimer(); }

    function updateStudyClock(){ const s = Math.floor(studiedSec); const mm = String(Math.floor(s/60)).padStart(2,'0'); const ss = String(s%60).padStart(2,'0'); mTime.textContent = `${mm}:${ss}`; }
    function drawTimer(){ timerEl.textContent = `${remain.toFixed(1)}s`; const total=10.0; const pct=100*(remain/total); bar.style.width = `${Math.max(0,Math.min(100,pct))}%`; }
    const shuffle = arr => [...arr].sort(()=>Math.random()-.5);

    function startSet(){ if(!WORDS.length){ toastShow('단어세트가 비어 있습니다. 먼저 업로드하세요.'); return; }
      order = shuffle(WORDS.map((_,i)=>i)); idx=0; correct=0; wrong=0; streak=0; studiedSec=0; feedback('훈련 시작. 타이머는 10초. 망설이면 패배.', true); updateHud(); answerEl.disabled=false; giveupBtn.disabled=false; retryBtn.disabled=false; answerEl.value=''; answerEl.focus(); showQuestion(); if(timerId) clearInterval(timerId); ticking=true; timerId=setInterval(tick,100); }

    function updateHud(){ progressText.textContent = `${Math.min(idx,order.length)}/${order.length}`; correctText.textContent=correct; wrongText.textContent=wrong; streakText.textContent=`${streak}🔥`; const total=Math.max(1,correct+wrong); const acc=Math.round((correct/total)*100); mAcc.textContent=`${acc}%`; mFail.textContent=wrong; mPass.textContent=passTicket; badgeCount.textContent = WORDS.length; }

    function showQuestion(){ if(idx>=order.length){ ticking=false; clearInterval(timerId); timerId=null; answerEl.disabled=true; giveupBtn.disabled=true; const acc = Math.round((correct/Math.max(1,(correct+wrong)))*100); if(acc>=90){ passTicket++; feedback(`종료. 성공률 ${acc}%. 지옥탈출권 +1 지급.`, true); } else feedback(`종료. 성공률 ${acc}%. 재시험 권장.`, acc>=70); updateHud(); return; }
      const q = WORDS[order[idx]]; wordEl.textContent = q.w; hintEl.textContent = `힌트: ${q.k}`; const ex = q.ex && q.ex.length ? q.ex : [`I like <b>${q.w}</b>.`,`You must memorize <b>${q.w}</b> to survive the test.`,`He decided to practice the word <b>${q.w}</b> daily.`]; exampleList.innerHTML = ex.map(s=>`<div class=\"ex\">${s} <i style='color:var(--ink-dim)'>— 이 단어를 이렇게 안 외우면 독해 못 함.</i></div>`).join('');
      // 테스트 모드: 힌트/예문 숨김
      if (testMode) {
        hintEl.style.display = 'none';
        exampleList.innerHTML = '';
        modeBadge.style.display = '';
      } else {
        hintEl.style.display = '';
        modeBadge.style.display = 'none';
      } remain = 10.0; timerEl.classList.remove('bad'); drawTimer(); }

    function feedback(msg,good){ feedbackEl.style.color = good ? 'var(--ok)' : 'var(--red-2)'; feedbackEl.textContent = msg; }

    function answerSubmit(){ if(idx>=order.length) return; const q = WORDS[order[idx]]; const val = answerEl.value.trim(); const ok = val && q.k.replace(/\s+/g,'').includes(val.replace(/\s+/g,'')); if(ok){ correct++; streak++; feedback('정답. 다음.', true);} else { wrong++; streak=0; feedback(`오답. 정답 힌트: ${q.k}`, false); buzz(); } idx++; updateHud(); answerEl.value=''; nextQuestion(); }
    function nextQuestion(){ setTimeout(showQuestion, 320); }

    // 탭 전환
    tabs.forEach(t=>t.addEventListener('click', ()=>{ tabs.forEach(x=>x.classList.remove('active')); t.classList.add('active'); const v=t.dataset.view; Object.entries(views).forEach(([k,el])=>{ el.hidden = k!==v; }); }));

    // 버튼/입력 바인드
    startBtn.addEventListener('click', startSet); retryBtn.addEventListener('click', startSet);
    giveupBtn.addEventListener('click', ()=>{ wrong++; streak=0; updateHud(); buzz(); feedback('포기? 그런 단어는 없다. 감점.', false); idx++; nextQuestion(); });
    answerEl.addEventListener('keydown', (e)=>{ if(e.key==='Enter') answerSubmit(); });

    // 모드 전환
    modeTrain.addEventListener('click', ()=>{ testMode=false; modeTrain.classList.add('btn-primary'); modeTrain.classList.remove('btn-ghost'); modeTest.classList.add('btn-ghost'); modeTest.classList.remove('btn-primary'); hintEl.style.display=''; modeBadge.style.display='none'; exampleList.innerHTML=''; toastShow('훈련 모드: 힌트 표시'); showQuestion(); });
    modeTest.addEventListener('click', ()=>{ testMode=true; modeTest.classList.add('btn-primary'); modeTest.classList.remove('btn-ghost'); modeTrain.classList.add('btn-ghost'); modeTrain.classList.remove('btn-primary'); hintEl.style.display='none'; modeBadge.style.display=''; exampleList.innerHTML=''; toastShow('테스트 모드: 힌트 제거'); });

    // 문장 예시 찾기 (업로드 단어 반영)
    document.getElementById('exGo').addEventListener('click', ()=>{ const q = document.getElementById('exSearch').value.trim().toLowerCase(); const hit = WORDS.find(x=>x.w.toLowerCase()===q); const out = document.getElementById('exOut'); if(!hit){ out.innerHTML = `<div class='ex' style='color:var(--red-2)'>단어를 찾을 수 없음.</div>`; return;} const ex = hit.ex && hit.ex.length? hit.ex : [`I like <b>${hit.w}</b>.`,`Memorize <b>${hit.w}</b> or fail.`,`Practice <b>${hit.w}</b> every day.`]; out.innerHTML = ex.map((s,i)=>`<div class='ex'><b>${i+1}.</b> ${s}</div>`).join(''); });

    // 독해 문제 생성기 (업로드 단어 반영)
    document.getElementById('rdMake').addEventListener('click', ()=>{ const w = document.getElementById('rdWord').value.trim().toLowerCase(); if(!w) return; const hit = WORDS.find(x=>x.w.toLowerCase()===w); const meaning = hit ? hit.k : '—'; const tmpl = [ `Despite multiple warnings, the team chose to <b>${w}</b> the safety protocol, which led to serious consequences.`, `For long-term success, it is <b>crucial</b> to build consistent study habits from the first year of high school.`, `Some students <b>${w}</b> challenges, while others confront them and grow stronger.`]; const passage = tmpl.join(' ').replace(new RegExp(`\\b${w}\\b`,'gi'),'_____'); document.getElementById('rdPassage').value = passage + `\n\n[문항] 위 글의 빈칸에 들어갈 가장 적절한 단어는?\n(A) ${w}  (B) notion  (C) maintain  (D) allocate`; const fb = document.getElementById('rdFeedback'); fb.textContent = `힌트: ${w} = ${meaning}`; fb.style.color = '#b5b5b5'; });
    document.getElementById('rdCheck').addEventListener('click', ()=>{ const w = document.getElementById('rdWord').value.trim().toLowerCase(); const ans = document.getElementById('rdAns').value.trim().toLowerCase(); const fb = document.getElementById('rdFeedback'); if(!w) return; if(ans===w){ fb.style.color='var(--ok)'; fb.textContent='정답. 훈련을 계속해라.'; } else { fb.style.color='var(--red-2)'; fb.textContent='오답. 재도전.'; buzz(); } });

    // 랭킹 더미
    const rankData = [['#1','HARDMODE99',980,45],['#2','HELLRUNNER',965,40],['#3','NOEXCUSE',950,38],['#4','PANICSTUDY',928,34],['#5','GRINDKING',910,31],['#6','REDALERT',900,29],['#7','FOCUS707',880,27],['#8','RUTHLESS',865,26],['#9','LASTBOSS',850,25],['#10','DISCIPLINE',842,22]];
    document.getElementById('rankBody').innerHTML = rankData.map(r=>`<tr><td>${r[0]}</td><td>${r[1]}</td><td>${r[2]}</td><td>${r[3]}</td></tr>`).join('');

    // 초기 카운트 반영
    function refreshBadge(){ badgeCount.textContent = WORDS.length; }
    refreshBadge();

    // ===============================
    // 엑셀 업로드 → WORDS 교체 연결
    // ===============================
    loadBtn.addEventListener('click', ()=>{
      const file = excelInput.files && excelInput.files[0]; if(!file){ toastShow('엑셀(.xlsx) 파일을 선택하세요.'); return; }
      const reader = new FileReader();
      reader.onload = function(e){
        try{
          const data = new Uint8Array(e.target.result);
          const wb = XLSX.read(data, { type: 'array' });
          const sheet = wb.Sheets[wb.SheetNames[0]];
          const rows = XLSX.utils.sheet_to_json(sheet, { header:1 });
          const next = [];
          rows.forEach((row,i)=>{
            const eng = (row && row[0]||'').toString().trim();
            const kor = (row && row[1]||'').toString().trim();
            if(!eng || !kor) return;
            next.push({ w: eng, k: kor, ex: [ `I like <b>${eng}</b>.`, `You must memorize <b>${eng}</b> to survive the test.`, `Practice <b>${eng}</b> every day.` ] });
          });
          if(!next.length){ toastShow('읽을 단어가 없습니다. (첫 열: 단어, 둘째 열: 뜻)'); return; }
          WORDS = next;
          refreshBadge();
          uploadInfo.textContent = `업로드됨: ${WORDS.length}개`;
          toastShow(`단어 ${WORDS.length}개 로드 완료. 훈련을 재시작하세요.`);
          // 진행 중이면 재시작 유도
          if(ticking){ ticking=false; clearInterval(timerId); answerEl.disabled=true; giveupBtn.disabled=true; retryBtn.disabled=false; feedback('새 세트가 로드됨. 재시험 버튼으로 다시 시작.', true); }
        }catch(err){ console.error(err); toastShow('파일 처리 중 오류가 발생했습니다.'); }
      };
      reader.readAsArrayBuffer(file);
    });
  </script>
</body>
</html>
